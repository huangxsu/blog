---
title:  HTTP协议（下）
date: 2018-06-02 11:10:00
tags:
- HTTP
- HTTPS
---

重要的 HTTP 协议，很重要。《图解 HTTP》读书笔记，作者：上野 宣，译者：于均良。

<!--more-->

# 与 HTTP 写作的 Web 服务器

## 多域名虚拟主机

{% asset_img virtual-host.png 虚拟主机 %}

HTTP/1.1 规范允许一台 HTTP 服务器搭建多个 Web 站点。客户端使用 HTTP 协议访问服务器时，经常采用类型 www.abc.com 这样的主机域名。域名通过 DNS 服务映射到 IP 地址之后访问目标网站。在相同的 IP 地址下，由于虚拟主机可以寄存多个不同的主机域名，因为发送 HTTP 请求是，必须在 Host 首部内指定主机域名的 URI。

## 通信数据转发程序：代理、网关、隧道

1.  代理 是一种又转发功能的应用程序，扮演了位于服务器和客户端“中间人”的角色，使用代理服务器的理由有：利用缓存技术减少网络带宽流量；对特定网站的访问控制；获取访问日志。

缓存代理：代理转发响应时，缓存代理会预先将资源的副本保存在代理服务器上。当再次接收到相同资源请求是，就可以不从源服务器那里获取，将之前缓存的资源作为响应返回。

透明代理：转发请求或响应是，不对报文做任何加工被称为透明代理。

2.  网关 是转发其他服务器通信数据的服务器。

3.  隧道 在相隔甚远的客户端和服务器之间进行中转，并保持双方通信链接的应用程序。目的是确保客户端和服务器进行安全的通信。

## 缓存

缓存是指代理服务器或客户端本地磁盘内保存资源副本。利用缓存可减少对源服务器的访问，节省通信流量和通信时间。

1.  缓存服务器 是代理服务器的一种
2.  客户端缓存（浏览器）
3.  有效期 缓存失效， 会再次请求新资源。

# 确保Web安全的HTTPS

## HTTP 的缺点

1、 通信使用明文（不加密），内容可能会被窃听

加密处理防止被窃听：

1. 通信加密 HTTP协议没有加密机制，但可以通过和SSL（Secure Socket Layer，安全套接层）或TLS（Transport Layer Security，安全层传输协议）的组合使用，加密HTTP的通信内容。与SSL组合使用的HTTP被称为HTTPS。

2. 内容加密 为了做到有效的内容加密，前提是要求客户端和服务器同事具备加密和解密机制。


2、 不验证通信方的身份，因此有可能能遭遇伪装

任何人都可以发起请求：即使是无意义的请求也会照单全收，无法阻止海量请求下的Dos攻击（Denial of Service， 拒绝服务攻击）。

查明对手的证书：

虽然使用HTTP协议无法确定通信方，但如果使用SSL则可以。SSL提供了一种证书方法可用于确定对方身份。

证书由值得信任的第三方机构颁发，用以证明服务器和客户端是实际存在的。

3、 无法证明报文的完整性，所以有可能已遭篡改

## HTTP + 加密 + 认证 + 完整性保护 = HTTPS

































