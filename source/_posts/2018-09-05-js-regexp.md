---
title: JavaScript 正则表达式
date: 2018-09-05 15:09:32
tags:
  - JavaScript
  - 正则表达式
---

很多程序设计语言都实支持正则表达式的语法，在 JavaScript 中，正则表达式主要用于匹配位置或字符，以及`String`方法中使用的模式匹配。我心中的正则表达式好似一位相貌平凡，却底蕴深厚，拥有知性美的女子。当你不了解她时，她于你可能只是匆匆过客；当你熟悉她时，她便是归人……

<!--more-->

# 基础语法

每个元字符在正则表达式中具有相对应的功能，如果匹配的字符是元字符的话，需要用转义字符`\`进行转义，如`/\./`匹配字符`.`。

## 基本元字符

| 元字符/表达式  | 功能                                                                                   |
| -------------- | -------------------------------------------------------------------------------------- |
| `.`            | 匹配除换行符之外的任意单个字符<br>例如，/.n/将会匹配 "nay, an apple is on the tree" 中的 'an'|
| `\`            | 转义字符<br>例如，模式 /a\*/ 代表会匹配 0 个或者多个 a。相反，模式 /a\\\*/ 将 '\*' 的特殊性移除，从而可以匹配像 "a\*" 这样的字符串。|
| &#124;         | 逻辑或<br>例如，/green&#124;red/匹配“green apple”中的‘green’和“red apple”中的‘red’|
| `[]`           | 定义一个字符集，匹配集合中的一个字符，集合中的元字符如：`.`、`\`等都表示本身，无需转义，不过转义也是起作用的<br>例如，[abcd] 和[a-d]是一样的。他们都匹配"brisket"中得‘b’,也都匹配“city”中的‘c’。/[a-z.]+/ 和/[\w.]+/都匹配“test.i.ng”中的所有字符|
| `[^]`          | `[]`表达式的反义表达式，匹配不包括在字符集中的任意一个字符<br>例如，[^abc] 和 [^a-c] 是一样的。他们匹配"brisket"中的‘r’，也匹配“chop”中的‘h’。|
| `-`            | 定义一个区间，如`[a-z]`，区间的起点与终点在 ASCII 字符集里                             |
| `(x)`          |匹配 'x' 并且记住匹配项，括号被称为捕获括号<br>模式/(foo) (bar) \1 \2/中的'(foo)'和'(bar)'匹配并记住字符串 "foo bar foo bar" 中前两个单词。模式中的 \1 和 \2 匹配字符串的后两个单词。注意 \1、\2、\n 是用在正则表达式的匹配环节。在正则表达式的替换环节，则要使用像 $1、$2、$n 这样的语法，例如，'bar foo'.replace( /(...) (...)/, '$2 $1' )。|
|`(?:x)`         |匹配 'x' 但是不记住匹配项，叫作非捕获括号<br>如果表达式是 /foo{1,2}/，{1,2}将只对 ‘foo’ 的最后一个字符 'o' 生效。如果使用非捕获括号 /(?:foo){1,2}/，则{1,2}会匹配整个 ‘foo’ 单词。|

## 数量元字符

| 元字符/表达式 | 功能                                                                                                  |
| ------------- | ----------------------------------------------------------------------------------------------------- |
| `{n,m}`       | 匹配表达式前面一个字符，重复至少 n 次，至多 m 次，`{n,}`省略 m 表示至少重复 n 次<br>例如，/a{1, 3}/ 并不匹配“cndy”中的任意字符，匹配“candy”中的a，匹配“caandy”中的前两个a，也匹配“caaaaaaandy”中的前三个a|
| `+`           | 匹配前面一个表达式出现一次或多次，相当于`{1,}`<br>例如，/a+/匹配了在 "candy" 中的 'a'，和在 "caaaaaaandy" 中所有的 'a'。|
| `*`           | 匹配前面一个表达式出现 0 次或多次，相当于`{0,}`<br>例如，/bo*/会匹配 "A ghost boooooed" 中的 'booooo' 和 "A bird warbled" 中的 'b'，但是在 "A goat grunted" 中将不会匹配任何东西。|
| `?`           | 单独使用表示匹配前面一个表达式出现 0 次或 1 次，相当于`{0,1}`<br>例如，/e?le?/可以匹配“angel”中的'el'，和'angle'中的'le'以及'oslo'中的'l'<br>如果紧跟在任何量词 *、 +、? 或 {} 的后面，将会使量词变为非贪婪的（匹配尽量少的字符），和缺省使用的贪婪模式（匹配尽可能多的字符）正好相反。 |

## 位置元字符

| 元字符/表达式 | 功能                                                                                                                                                                |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `^`           | 单独使用表示匹配表达式的起始位置<br>例如，/^A/并不会匹配“an A”中的“A”，但是会匹配“An E”中的“A”                                                                      |
| `$`           | 匹配表达式的结束位置<br>例如，/t$/并不会匹配“eater”中的“t”，但是会匹配“eat”中的“t”                                                                                  |
| `\b`          | 匹配单词边界，边界代表单词开始或结束的位置<br>例如，/\bm/匹配“moon”中的“m”；/oo\b/并不能匹配“moon”中的“oo”，因为“oo”不在单词的边界                                  |
| `\B`          | `\b`元字符的反义字符，表示匹配不是单词开始或结束的位置<br>例如，/\B../匹配“possibly yesterday”中的“os”，而/y\B../匹配“possibly yesterday”中的“yes”                  |
| `(?=x)`       | 匹配字符 x 前面的位置，也称为零宽度正预测先行断言<br>例如，/Jack(?=Sprat&#124;Frost)/匹配“Jack”后面跟着“Spart”或者“Frost”，但是“Spart”和“Frost”都不是结果的一部分 |
| `(?!x)`       | 匹配不是字符 x 前面的位置，也称为零宽度负预测先行断言<br>例如，`/\d+(?!\.)/`匹配一个数字后面没有跟小数点的时候，/\d+(?!\.)/.exec('3.14')匹配“14”                    |

## 有特殊含义的元字符

| 元字符/表达式 | 功能                                                                                                                                          |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `\d`          | 相当于`[0-9]`，匹配一个 0 到 9 之间的数字<br>例如，`/\d/`匹配“B2”中的“B2”                                                                     |
| `\D`          | `\d`的反义字符，相当于`[^0-9]`，匹配一个非数字的字符<br>例如，`/\D/`匹配“B2”中的“B”                                                           |
| `\w`          | 相当于`[0-9a-zA-Z_]`加汉字，表示匹配数字、小写字母、大写字母、下划线和汉字中的任意一个字符<br/>例如，`/\w/`匹配“$5.28”中的“5”                 |
| `\W`          | `\w`的反义字符，相当于`[^0-9a-zA-Z_]`，表示匹配一个非单字字符 <br/> 例如，`/\W/`匹配“50%” 中的“%”                                             |
| `\s`          | 相当于`[\t\v\n\r\f ]`，表示匹配一个空白符，包括空格、水平制表符、垂直制表符、换行符、回车符、换页符<br>例如，`/\s\w*/`匹配“foo bar.”中的“bar” |
| `\S`          | `\s`的反义字符，表示匹配一个非空表字符<br>例如，`/\S\w*/`匹配“foo bar.”中的“foo”                                                              |
| `\u{hhhh}`    | 	(仅当设置了u标志时) 使用Unicode值hhhh匹配字符 (十六进制数字)<br>例如，/\u{20BB7}/u.test('𠮷')|

## 标志字符

| 标志          |    描述         |
| ------------- | ---------------|
| `g`          |全局搜索|
| `i`          |不区分大小写搜索|
| `m`          |多行搜索|
| `u`          |用来正确处理大于\uFFFF的 Unicode 字符|
| `y`          |执行“粘性”搜索,匹配从目标字符串的当前位置开始，可以使用y标志。|

# 参考文献

1. **[JS 的正则表达式--掘金](https://juejin.im/post/59b5e50f51882519777c4815)**
2. **[JavaScript正则进阶之路--Github](https://github.com/jawil/blog/issues/20)**
3. **[JavaScript正则进阶之路--MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions)**
